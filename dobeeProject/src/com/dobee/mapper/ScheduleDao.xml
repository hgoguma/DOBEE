<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dobee.dao.ScheduleDao">

	<!-- 스케쥴 insert >> insert 후 seq return 함 -->
	<insert id="addSchedule" parameterType="com.dobee.vo.schedule.Schedule" useGeneratedKeys="true" keyProperty="schSeq">
		INSERT INTO SCHEDULE(STARTTIME, ENDTIME) VALUES( #{startTime}, #{endTime} )
	</insert>
	
	<!-- 스케쥴 가져오기 -->
	<select id="getSchedule" resultType="com.dobee.vo.schedule.Schedule">
		SELECT SCHSEQ, STARTTIME, ENDTIME FROM SCHEDULE WHERE SCHSEQ=#{schSeq}
	</select>
	
	<!-- 스케쥴 수정하기 -->
	<update id="scheduleModify" parameterType="com.dobee.vo.schedule.Schedule">
		UPDATE SCHEDULE SET STARTTIME=#{startTime}, ENDTIME=#{endTime} WHERE SCHSEQ=(SELECT SCHSEQ FROM NOTSCHEDULE WHERE SCHSEQ=#{schSeq})
	</update>

	<!-- 공지사항 일정 캘린더 병합		0130 게다죽		~ing -->
	<select id="noticeToCalendar" resultType="com.dobee.vo.schedule.MainSchedule">
		SELECT S.SCHSEQ AS SCHSEQ, S.STARTTIME AS STARTTIME , S.ENDTIME AS ENDTIME, NS.NSCONTENT AS NSCONTENT
			FROM SCHEDULE S
				INNER JOIN NOTSCHEDULE NS ON S.SCHSEQ = NS.SCHSEQ
	</select>

</mapper>
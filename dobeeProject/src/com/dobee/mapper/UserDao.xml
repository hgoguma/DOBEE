<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dobee.dao.UserDao">
	
	<!--  -->
	<select id="getUserList" resultType="com.dobee.vo.member.User">
		SELECT MAIL, NAME, MYPIC, AUTHCODE, TEAMCODE 
		FROM USER
	</select>
	
	<!-- User 정보 가져오기 -->
	<select id="getUser" resultType="com.dobee.vo.member.User">
		SELECT MAIL, PASSWORD, NAME, MYPIC, AUTHCODE FROM USER WHERE MAIL=#{mail}
	</select>
	
	<!-- 신청코드 불러오기 -->
	<select id="getApyCode" resultType="String">
		SELECT ENTRY FROM APPLYCODE
	</select>
	
	
	<!-- 결재자 불러오귀 // AUTHCODE=1 팀장 -->
	<select id="getApprovalList" resultType="String">
		SELECT NAME FROM USER WHERE AUTHCODE=1
	</select>
	
	<!-- 결재자 불러오기2 -->
	<select id="getApprovalList2" resultType="com.dobee.vo.member.User">
		SELECT MAIL, NAME FROM USER WHERE AUTHCODE=1
	</select>
	
	
	<!-- 연장근무 년도 불러오기 -->
	<select id="overTimeYearList" resultType="Integer">
		SELECT DISTINCT DATE_FORMAT(ATTTIME, '%Y') FROM ATTEND;
	</select>
	
	
	<!-- 연장근무 월 불러오기 -->
	<select id="overTimeMonthList" resultType="Integer">
		SELECT DISTINCT DATE_FORMAT(ATTTIME, '%c') FROM ATTEND;
	</select>
	
	
	<!-- 연장근무 신청하기 -->
	<insert id="overTimeApply" parameterType="com.dobee.vo.Apply">
		INSERT INTO APPLY (REQDATE, REASON, STARTAT, ENDAT, ISAUTH, DRAFTER, APPROVAL, APYCODE)
			VALUES (CURDATE(), '1', '20200101000000', '20200101110000', '미승인', 'JG@KIM.COM', 'admin@gmail.com', 6)
	</insert>
	
</mapper>